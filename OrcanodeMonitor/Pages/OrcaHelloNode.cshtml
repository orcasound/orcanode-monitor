@page "{podNamespace}"
@model OrcanodeMonitor.Pages.OrcaHelloNodeModel
@{
    ViewData["Title"] = "OrcaHello for " + Model.Location;
}

<div class="text-center">
    <h1 class="display-4"><a href="@Model.AksUrl" target="_blank">OrcaHello</a> for @Model.Location</h1>
    <div style="display: flex; gap: 20px;">
        <table style="border: 1px solid #ccc; border-collapse: separate;">
            <tr>
                <th colspan="2"
                    style="text-align: center; font-size: 1.2em; font-weight: bold;
                 border-bottom: 1px solid #ccc; padding: 8px;">
                    Pod
                </th>
            </tr>
            <tr>
                <td style="text-align: right; font-weight: bold; padding: 4px;">Namespace:</td>
                <td style="text-align: left; padding: 4px;">@Model.PodNamespace</td>
            </tr>
            <tr>
                <td style="text-align: right; font-weight: bold; padding: 4px;">Name:</td>
                <td style="text-align: left; padding: 4px;">@Model.PodName</td>
            </tr>
            <tr>
                <td style="text-align: right; font-weight: bold; padding: 4px;">Image:</td>
                <td style="text-align: left; padding: 4px;">@Model.ImageName</td>
            </tr>
            <tr>
                <td style="text-align: right; font-weight: bold; padding: 4px;">Uptime:</td>
                <td style="text-align: left; padding: 4px;">@Model.Uptime</td>
            </tr>
            <tr>
                <td style="text-align: right; font-weight: bold; padding: 4px;">Lag:</td>
                <td style="text-align: left; padding: 4px;">@Model.Lag</td>
            </tr>
        </table>
        <table style="border: 1px solid #ccc; border-collapse: separate;">
            <tr>
                <th colspan="2"
                    style="text-align: center; font-size: 1.2em; font-weight: bold;
                 border-bottom: 1px solid #ccc; padding: 8px;">
                    Node
                </th>
            </tr>
            <tr>
                <td style="text-align: right; font-weight: bold; padding: 4px;">Name:</td>
                <td style="text-align: left; padding: 4px;">@Model.NodeName</td>
            </tr>
            <tr>
                <td style="text-align: right; font-weight: bold; padding: 4px;">Cores:</td>
                <td style="text-align: left; padding: 4px;">@Model.NodeCpuCapacityCores</td>
            </tr>
            <tr>
                <td style="text-align: right; font-weight: bold; padding: 4px;">CPU Usage:</td>
                <td style="text-align: left; padding: 4px;">@Model.NodeCpuUsageCores.ToString("F2")</td>
            </tr>
            <tr>
                <td style="text-align: right; font-weight: bold; padding: 4px;">CPU %:</td>
                <td style="text-align: left; padding: 4px;">@(Math.Round(Model.NodeCpuPercent))%</td>
            </tr>
            <tr>
                <td style="text-align: right; font-weight: bold; padding: 4px;">Memory:</td>
                <td style="text-align: left; padding: 4px;">@Model.NodeMemoryCapacity</td>
            </tr>
            <tr>
                <td style="text-align: right; font-weight: bold; padding: 4px;">Memory Usage:</td>
                <td style="text-align: left; padding: 4px;">@Model.NodeMemoryUsage</td>
            </tr>
            <tr>
                <td style="text-align: right; font-weight: bold; padding: 4px;">Memory %:</td>
                <td style="text-align: left; padding: 4px;">@(Math.Round(Model.NodeMemoryPercent))%</td>
            </tr>
        </table>
    </div>

    <h2>Recent Log</h2>
    <div id="logBox"
         style="border: 1px solid #ccc; padding: 10px; text-align: left;
            height: 400px; overflow-y: auto; white-space: pre-wrap;">
        <pre>@Model.LogData</pre>
    </div>

    <script>
        // Scroll to bottom once the DOM is ready
        window.addEventListener("DOMContentLoaded", function () {
            var box = document.getElementById("logBox");
            box.scrollTop = box.scrollHeight;
        });
    </script>

</div>
